Домашнее задание к занятию «Компьютерные сети. Лекция 2»
Цель задания

В результате выполнения задания вы:

    познакомитесь с инструментами настройки сети в Linux, агрегации нескольких сетевых интерфейсов, отладки их работы;
    примените знания о сетевых адресах на практике для проектирования сети.

Инструкция к заданию

    Создайте .md-файл для ответов на вопросы задания в своём репозитории, после выполнения прикрепите ссылку на него в личном кабинете.
    Любые вопросы по выполнению заданий задавайте в чате учебной группы или в разделе «Вопросы по заданию» в личном кабинете.

Дополнительные материалы для выполнения задания

    Онлайн-калькулятор сетей.
    Калькулятор сетей — программа ipcalc (apt install ipcalc). Если есть графический интерфейс, то у программы-калькулятора есть инженерный режим, там можно считать и сети.

Задание

    Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
```
yaha@yahawork:~$ ip -c -br link
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
enp3s0           DOWN           58:d5:6e:f6:79:49 <NO-CARRIER,BROADCAST,MULTICAST,UP> 
enp4s0           UP             18:31:bf:e0:ad:6d <BROADCAST,MULTICAST,UP,LOWER_UP> 
yaha@yahawork:~$ 
дополнительно
ip -a
ifconfig
в windows 
ipconfig
```

    Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
```
cdp от cisco
в линуксе есть два пакета cdpr - cisco discovery protocol reporter и lldpd
запуск через sudo cdpr и 
lldpctl предварительно запустив через systemd
```


    Какая технология используется для разделения L2-коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
```
vlan
и пакет vlan
в centos пример рабочего конфига для vlan 300
[root@dhcp-poligon network-scripts]# cat ifcfg-ens160.300
VLAN=yes
DEVICE=ens160.300
PHYSDEV=ens160
BOOTPROTO=static
ONBOOT=yes
IPADDR=10.30.0.1
NETMASK=255.255.255.0
[root@dhcp-poligon network-scripts]# 
```


   Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
``` 
mode=0 (balance-rr)
Последовательно кидает пакеты, с первого по последний интерфейс.
mode=1 (active-backup)
Один из интерфейсов активен. Если активный интерфейс выходит из строя (link down и т.д.), другой интерфейс заменяет активный. Не требует дополнительной настройки коммутатора
mode=2 (balance-xor)
Передачи распределяются между интерфейсами на основе формулы ((MAC-адрес источника) XOR (MAC-адрес получателя)) % число интерфейсов. Один и тот же интерфейс работает с определённым получателем. Режим даёт балансировку нагрузки и отказоустойчивость.
mode=3 (broadcast)
Все пакеты на все интерфейсы
mode=4 (802.3ad)
Link Agregation — IEEE 802.3ad, требует от коммутатора настройки.
mode=5 (balance-tlb)
Входящие пакеты принимаются только активным сетевым интерфейсом, исходящий распределяется в зависимости от текущей загрузки каждого интерфейса. Не требует настройки коммутатора.
mode=6 (balance-alb)
Тоже самое что 5, только входящий трафик тоже распределяется между интерфейсами. Не требует настройки коммутатора, но интерфейсы должны уметь изменять MAC.

если соединение с коммутатором - предпочтительно режим 4
Необходимо настроить lacp на коммутаторе
для centos 7x
ifcfg-bond0
DEVICE=bond0
NAME=bond0
TYPE=Bond
BONDING_MASTER=yes
IPV6INIT=no
MTU=9000
ONBOOT=yes
USERCTL=no
NM_CONTROLLED=no
BOOTPROTO=none
BONDING_OPTS="mode=802.3ad"

ifcfg-enp3s0
DEVICE=enp3s0
NAME=bond0-slave0
TYPE=Ethernet
MTU=9000
BOOTPROTO=none
ONBOOT=yes
MASTER=bond0
SLAVE=yes
USERCTL=no 
NM_CONTROLLED=no 

ifcfg-enp5s0
DEVICE=enp5s0
NAME=bond0-slave1
TYPE=Ethernet
MTU=9000
BOOTPROTO=none
ONBOOT=yes
MASTER=bond0
SLAVE=yes
USERCTL=no
NM_CONTROLLED=no 
```

    Сколько IP-адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
```
c маской 29 будет 8 адресов
адрес сети
6 хостов 
и броадкаст адрес

256/8 = 32 подсети

Address:   10.10.10.0           
Netmask:   255.255.255.248 = 29 
Wildcard:  0.0.0.7              
Network:   10.10.10.0/29        
HostMin:   10.10.10.1           
HostMax:   10.10.10.6           
Broadcast: 10.10.10.7           
Hosts/Net: 6                     


Address:   10.10.10.8           
Netmask:   255.255.255.248 = 29 
Wildcard:  0.0.0.7              
Network:   10.10.10.8/29        
HostMin:   10.10.10.9           
HostMax:   10.10.10.14          
Broadcast: 10.10.10.15          
Hosts/Net: 6                     
```

    Задача: вас попросили организовать стык между двумя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP-адреса? Маску выберите из расчёта — максимум 40–50 хостов внутри подсети.
```
RFC 6598
100.64.0.0/10
Address:   10.64.0.0            
Netmask:   255.255.255.192 = 26 
Wildcard:  0.0.0.63             
Network:   10.64.0.0/26         
HostMin:   10.64.0.1            
HostMax:   10.64.0.62           
Broadcast: 10.64.0.63           
Hosts/Net: 62                    
```

    Как проверить ARP-таблицу в Linux, Windows? Как очистить ARP-кеш полностью? Как из ARP-таблицы удалить только один нужный IP?
 ```
 arp -na
 или 
 arp -ne
 очистка
 ip -s -s neigh flush all
 arp -d ip_хоста
 
 в виндовс
 arp -a
 netsh interface IP delete arpcache
 arp -d ip_хоста
 ```
 
 
 

В качестве решения отправьте ответы на вопросы и опишите, как они были получены.
Задание со звёздочкой*

Это самостоятельное задание, его выполнение необязательно.

    Установите эмулятор EVE-ng.

Инструкция по установке.

Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng.
Правила приёма домашнего задания

В личном кабинете отправлена ссылка на .md-файл в вашем репозитории.
Критерии оценки

Зачёт:

    выполнены все задания;
    ответы даны в развёрнутой форме;
    приложены соответствующие скриншоты и файлы проекта;
    в выполненных заданиях нет противоречий и нарушения логики.

На доработку:

    задание выполнено частично или не выполнено вообще;
    в логике выполнения заданий есть противоречия и существенные недостатки.

Обязательными являются задачи без звёздочки. Их выполнение необходимо для получения зачёта и диплома о профессиональной переподготовке.

Задачи со звёздочкой (*) являются дополнительными или задачами повышенной сложности. Они необязательные, но их выполнение поможет лучше разобраться в теме.
